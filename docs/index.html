<!DOCTYPE html> <html lang="EN"> <head> <meta charset="utf-8"> <title>Raster</title> <style>html body{margin:0 auto 0 auto;padding:20px;max-width:1024px;font-family:sans-serif;font-size:14pt;overflow-y:scroll;}html body a{text-decoration:none;}html body a[href]{color:#0055AA;}html body a[href]:hover{color:#0088EE;}html body pre{background:#FAFAFA;border:1px solid #DDDDDD;padding:0.75em;overflow-x:auto;}html body pre >code a[href]{color:#223388;}article.project h1{font-size:1.7em;}article.project h1,article.project h2,article.project h3,article.project h4,article.project h5,article.project h6{margin:0.2em 0 0.1em 0;text-indent:1em;}article.project >header{text-align:center;}article.project >header img.logo{display:block;margin:auto;max-height:170px;}article.project >header h1{display:inline-block;text-indent:0;font-size:2.5em;}article.project >header .version{vertical-align:bottom;}article.project >header .languages{margin-top:-0.5em;text-transform:capitalize;}article.project >header .description{margin:0;}article.project >header .pages{margin-top:0.5em;font-size:1.2em;text-transform:capitalize;}article.project >header .pages a{display:inline-block;padding:0 0.2em;}article.project >section{margin:1em 0 1em 0;}article.project >section img{max-width:100%;}article.project #index >ul{list-style:none;margin:0;padding:0;}article.project .row label{display:inline-block;min-width:8em;}article.project #system .row{display:flex;}article.project #system #dependencies{display:inline;margin:0;padding:0;}article.project #system #dependencies li{display:inline;padding:0 0.2em;}article.project #system #author label{vertical-align:top;}article.project #system #author ul{display:inline-block;margin:0;padding:0;list-style:none;}article.definition{margin:1em 0 0 0;}article.definition >header h1,article.definition >header h2,article.definition >header h3,article.definition >header h4,article.definition >header h5,article.definition >header h6{text-indent:0;display:inline-block;}article.definition >header ul{display:inline-block;list-style:none;margin:0;padding:0;}article.definition >header ul li{display:inline-block;padding:0 0.2em 0 0;}article.definition >header .visibility{display:none;}article.definition >header .visibility,article.definition >header .type{text-transform:lowercase;}article.definition >header .source-link{visibility:hidden;float:right;}article.definition >header .source-link:after{visibility:visible;content:"[SRC]";}article.definition .docstring{margin:0 0 0 1em;}article.definition .docstring pre{font-size:0.8em;white-space:pre-wrap;}.definition.package >header ul.nicknames{display:inline-block;list-style:none;margin:0;padding:0 0 0 1em;}.definition.package >header ul.nicknames li{display:inline;}.definition.package >header ul.nicknames:before{content:"(";}.definition.package >header ul.nicknames:after{content:")";}.definition.package ul.definitions{margin:0;list-style:none;padding:0 0 0 0.5em;}.definition.callable >header .name:before,.definition.type >header .name:before{content:"(";font-weight:normal;}.definition.callable >header .arguments:after,.definition.type >header .arguments:after{content:")";}.definition.callable >header .arguments .arguments:before,.definition.type >header .arguments .arguments:before{content:"(";}.definition.callable >header .arguments .argument,.definition.type >header .arguments .argument{padding:0;}.definition.callable >header .arguments .argument.lambda-list-keyword,.definition.type >header .arguments .argument.lambda-list-keyword{color:#991155;}.definition li>mark{background:none;border-left:0.3em solid #0088EE;padding-left:0.3em;display:block;}</style> </head> <body> <article class="project"> <header>   <h1>raster</h1>   <span class="version">0.0.0</span>    <p class="description">A library for software rasterisation</p>   </header> <section id="documentation"><article><h1 id="about raster">About Raster</h1><p>This is a portable software rasterisation library. It implements many primitives to perform drawing operations in software onto a portable and ubiquitous format: 8-bit RGBA pixel buffers.</p><h2 id="basic operation">Basic Operation</h2><p>We'll assume the package <code>org.shirakumo.raster</code> is nicknamed to <code>raster</code>. You can perform simple raster operations with the <code><a href="#MACRO-FUNCTION%20ORG.SHIRAKUMO.RASTER%3AWITH-DRAWING" class="xref">with-drawing</a></code> macro and the draw commands:</p><code style="display:block" class="code-block" data-language="common lisp"><pre>(<a href="#MACRO-FUNCTION%20ORG.SHIRAKUMO.RASTER%3AWITH-DRAWING" class="xref">raster:with-drawing</a> (800 600)
  (raster:draw-line 10 10 100 100)
  (raster:draw-line 10 20 100 100 :sampler (raster:encode-color 255 0 0))
  (raster:draw-rectangle 400 300 100 100 :sampler (raster:encode-color 0 255 0 128))
  (raster:draw-ellipse 800 600 200 100 :feather 10)
  (raster:with-rect-clip (0 0 100 100)
    (raster:draw-ellipse 100 100 50 50)))</pre></code><p>This will return the completed <code><a href="#STRUCTURE%20ORG.SHIRAKUMO.RASTER%3AIMAGE" class="xref">image</a></code> into which the shapes were drawn. Please see the respective functions for all available options.</p><h2 id="compositing and sampling">Compositing and Sampling</h2><p>Most <code>draw-*</code> calls are relatively simple wrappers over <code><a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACOMPOSITE-SDF" class="xref">composite-sdf</a></code>. Sometimes though it can be too expensive to perform raster operations via SDFs. In this case you may want to either draw pixels directly yourself via <code><a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACOLOR-REF" class="xref">color-ref</a></code> and <code><a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACOLOR-REF%2A" class="xref">color-ref*</a></code>, or at least handle the compositing of different buffers and samplers.</p><p><code><a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ABLIT-BUFFER" class="xref">blit-buffer</a></code> simply copies pixels from one buffer's sub-region to another. It does not perform interpolation, so it can't stretch or squash the image.</p><p><code><a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACOMPOSITE-BUFFER" class="xref">composite-buffer</a></code> composites the pixels from one buffer onto another with basic &quot;source-over&quot; alpha blending applied. This is typically how two images are combined.</p><p><code><a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACOMPOSITE-MASK" class="xref">composite-mask</a></code> does the same but using an arbitrary <code><a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ASAMPLER" class="xref">sampler</a></code> and an alpha mask to determine which pixels to draw to.</p><p><code><a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACOMPOSITE-SDF" class="xref">composite-sdf</a></code> finally is the same as <code><a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACOMPOSITE-MASK" class="xref">composite-mask</a></code> but instead of using an explicit mask, it relies on an <code><a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ASDF" class="xref">sdf</a></code> function to provide the mask.</p><p>A <code><a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ASAMPLER" class="xref">sampler</a></code> is a function that simply returns a <code><a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ACOLOR" class="xref">color</a></code> value for a given pixel <code><a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3AINDEX" class="xref">index</a></code> pair. The underlying source can be a constant colour (via <code><a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ASOLID-COLOR" class="xref">solid-color</a></code>), another image (via <code><a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ASAMPLER" class="xref">sampler</a></code>), a gradient (via <code><a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ARADIAL-GRADIENT" class="xref">radial-gradient</a></code>, <code><a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ALINEAR-GRADIENT" class="xref">linear-gradient</a></code>, <code><a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ABILINEAR-GRADIENT" class="xref">bilinear-gradient</a></code>, <code><a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ADIAMOND-GRADIENT" class="xref">diamond-gradient</a></code>, or <code><a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACONICAL-GRADIENT" class="xref">conical-gradient</a></code>), or some other function that computes the colour value to use.</p><p>The primary <code><a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ASAMPLER" class="xref">sampler</a></code> constructed from an image also allows you to rotate and transform the image arbitrarily. To do this it uses the <code><a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ASAMPLE-COLOR" class="xref">sample-color</a></code> function to access pixels, which performs bilinear interpolation of colours as needed.</p><h2 id="signed distance fields">Signed Distance Fields</h2><p>Most drawing operations happen via Signed Distance Fields. These are functions that represent the distance to an outline as a signed number, positive being outside, negative inside. They are a very convenient representation of shapes, since they can easily be combined together and evaluated to produce blurred and anti-aliased shapes.</p><p>This library provides a variety of functions to create <code><a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ASDF" class="xref">sdf</a></code>s for particular shapes:</p><ul><li><p><code><a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ARECTANGLE" class="xref">rectangle</a></code></p></li><li><p><code><a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3AELLIPSE" class="xref">ellipse</a></code></p></li><li><p><code><a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ALINE" class="xref">line</a></code></p></li><li><p><code><a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACURVE" class="xref">curve</a></code></p></li><li><p><code><a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3APOLYGON" class="xref">polygon</a></code></p></li></ul><p>And to combine or manipulate them:</p><ul><li><p><code><a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ASUBTRACT" class="xref">subtract</a></code></p></li><li><p><code><a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACOMBINE" class="xref">combine</a></code></p></li><li><p><code><a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3AINTERSECT" class="xref">intersect</a></code></p></li><li><p><code><a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3AOUTLINE" class="xref">outline</a></code></p></li><li><p><code><a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ATRANSLATE" class="xref">translate</a></code></p></li><li><p><code><a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ASCALE" class="xref">scale</a></code></p></li><li><p><code><a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3AROTATE" class="xref">rotate</a></code></p></li><li><p><code><a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ASKEW" class="xref">skew</a></code></p></li><li><p><code><a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ATRANSFORM" class="xref">transform</a></code></p></li></ul><p>While SDFs are extremely convenient in this way, be aware that the more complex the shape, the more expensive it gets to evaluate and thus raster the SDF, so they aren't suitable for everything, especially when performance is crucial.</p></article></section>   <section id="system"> <h2>System Information</h2>  <div class="row"> <label for="version">Version:</label> <a id="version">0.0.0</a> </div>   <div class="row"> <label for="dependencies">Dependencies:</label> <ul id="dependencies"><li><a class="external" href="https://Shinmera.github.io/documentation-utils/">documentation-utils</a></li><li><a class="external">nibbles</a></li></ul> </div>   <div class="row" id="author"> <label for="author">Author:</label> <a href="mailto:shinmera@tymoon.eu">Yukari Hafner</a> </div>   <div class="row"> <label for="license">License:</label> <a id="license" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/LICENSE">zlib</a> </div>   <div class="row"> <label for="homepage">Homepage:</label> <a id="homepage" href="https://shirakumo.github.io/raster/">https://shirakumo.github.io/raster/</a> </div>   <div class="row"> <label for="bug-tracker">Bug Tracker:</label> <a id="bug-tracker" href="https://github.com/shirakumo/raster/issues">https://github.com/shirakumo/raster/issues</a> </div>   <div class="row"> <label for="sources">Sources:</label> <a id="sources" href="https://github.com/shirakumo/raster.git">https://github.com/shirakumo/raster.git</a> </div>  </section>    <section id="index"> <h2>Definition Index</h2> <ul> <li> <article class="definition package" id="PACKAGE ORG.SHIRAKUMO.RASTER"> <header> <h3> <a href="#PACKAGE%20ORG.SHIRAKUMO.RASTER">ORG.SHIRAKUMO.RASTER</a> </h3> <ul class="nicknames"></ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> <ul class="definitions"> <li> <article class="definition structure" id="STRUCTURE ORG.SHIRAKUMO.RASTER:IMAGE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">STRUCTURE</span> <h4 class="name"> <a href="#STRUCTURE%20ORG.SHIRAKUMO.RASTER%3AIMAGE">IMAGE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/buffer.lisp#L23">Source</a>  </header> <div class="docstring"><pre>Representation of a pixel buffer along with its image dimensions.

See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3AIMAGE-BUFFER" class="xref">IMAGE-BUFFER</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3AIMAGE-WIDTH" class="xref">IMAGE-WIDTH</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3AIMAGE-HEIGHT" class="xref">IMAGE-HEIGHT</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3AMAKE-IMAGE" class="xref">MAKE-IMAGE</a></pre></div> </article> </li>  <li> <article class="definition type-definition" id="TYPE ORG.SHIRAKUMO.RASTER:BUFFER"> <header> <span class="visibility">EXTERNAL</span> <span class="type">TYPE-DEFINITION</span> <h4 class="name"> <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ABUFFER">BUFFER</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="file:///home/linus/Projects/c/sbcl/src/code/deftype.lisp#12:0">Source</a>  </header> <div class="docstring"><pre>Type representing a pixel buffer.

This is an alias for (SIMPLE-ARRAY (UNSIGNED-BYTE 8) (*)) with the
following additional constraint: the data contained within should be
pixels in row-major order laid out as B G R A quadruplets. As such,
the length of a buffer should always be a multiple of four.

A buffer can hold a maximum of 1073741823 (2^30-1) pixels.

See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ACOLOR" class="xref">COLOR (type)</a>
See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ACHANNEL" class="xref">CHANNEL (type)</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACOLOR-REF" class="xref">COLOR-REF</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACOLOR-REF%2A" class="xref">COLOR-REF*</a></pre></div> </article> </li>  <li> <article class="definition type-definition" id="TYPE ORG.SHIRAKUMO.RASTER:CHANNEL"> <header> <span class="visibility">EXTERNAL</span> <span class="type">TYPE-DEFINITION</span> <h4 class="name"> <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ACHANNEL">CHANNEL</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="file:///home/linus/Projects/c/sbcl/src/code/deftype.lisp#12:0">Source</a>  </header> <div class="docstring"><pre>Type representing a single color channel.

This is an alias for (UNSIGNED-BYTE 8).

See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ABUFFER" class="xref">BUFFER (type)</a>
See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ACOLOR" class="xref">COLOR (type)</a></pre></div> </article> </li>  <li> <article class="definition type-definition" id="TYPE ORG.SHIRAKUMO.RASTER:COLOR"> <header> <span class="visibility">EXTERNAL</span> <span class="type">TYPE-DEFINITION</span> <h4 class="name"> <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ACOLOR">COLOR</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="file:///home/linus/Projects/c/sbcl/src/code/deftype.lisp#12:0">Source</a>  </header> <div class="docstring"><pre>Type representing a single color or pixel.

This is an alias for (UNSIGNED-BYTE 32) with four eight-bit color
channels laid out as B G R A in little-endian order, meaning B
occupies the lowest bits and A the highest bits.

See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ABUFFER" class="xref">BUFFER (type)</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3AENCODE-COLOR" class="xref">ENCODE-COLOR</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ADECODE-COLOR" class="xref">DECODE-COLOR</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACOLOR-REF" class="xref">COLOR-REF</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACOLOR-REF%2A" class="xref">COLOR-REF*</a></pre></div> </article> </li>  <li> <article class="definition type-definition" id="TYPE ORG.SHIRAKUMO.RASTER:COORDINATE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">TYPE-DEFINITION</span> <h4 class="name"> <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ACOORDINATE">COORDINATE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="file:///home/linus/Projects/c/sbcl/src/code/deftype.lisp#12:0">Source</a>  </header> <div class="docstring"><pre>Type representing a coordinate within an SDF.

This is an alias for SINGLE-FLOAT.

See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACOORDINATE" class="xref">COORDINATE</a></pre></div> </article> </li>  <li> <article class="definition type-definition" id="TYPE ORG.SHIRAKUMO.RASTER:INDEX"> <header> <span class="visibility">EXTERNAL</span> <span class="type">TYPE-DEFINITION</span> <h4 class="name"> <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3AINDEX">INDEX</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="file:///home/linus/Projects/c/sbcl/src/code/deftype.lisp#12:0">Source</a>  </header> <div class="docstring"><pre>Type representing an index into a color buffer.

This is an alias for (UNSIGNED-BYTE 32) and is used to represent
dimensions and coordinates for a color buffer.

The index of a pixel must not exceed 1073741823 (2^30-1).

See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ABUFFER" class="xref">BUFFER (type)</a></pre></div> </article> </li>  <li> <article class="definition type-definition" id="TYPE ORG.SHIRAKUMO.RASTER:SAMPLER"> <header> <span class="visibility">EXTERNAL</span> <span class="type">TYPE-DEFINITION</span> <h4 class="name"> <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ASAMPLER">SAMPLER</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="file:///home/linus/Projects/c/sbcl/src/code/deftype.lisp#12:0">Source</a>  </header> <div class="docstring"><pre>Type representing sampling functions.

This is an alias for (FUNCTION (INDEX INDEX) COLOR).

A sampler should be a function that takes an X and Y pixel index, and
returns a single COLOR for that point.

See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ACOLOR" class="xref">COLOR (type)</a>
See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3AINDEX" class="xref">INDEX (type)</a></pre></div> </article> </li>  <li> <article class="definition type-definition" id="TYPE ORG.SHIRAKUMO.RASTER:SDF"> <header> <span class="visibility">EXTERNAL</span> <span class="type">TYPE-DEFINITION</span> <h4 class="name"> <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ASDF">SDF</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="file:///home/linus/Projects/c/sbcl/src/code/deftype.lisp#12:0">Source</a>  </header> <div class="docstring"><pre>Type representing a signed distance field.

This is an alias for (FUNCTION (COORDINATE COORDINATE) SINGLE-FLOAT).

A SDF should be a function that takes an X and Y pixel index and
returns a single SINGLE-FLOAT that describes the signed distance
function value at that point. Positive values lie outside, and
negative values lie inside the described shape.

See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ACOORDINATE" class="xref">COORDINATE (type)</a></pre></div> </article> </li>  <li> <article class="definition type-definition" id="TYPE ORG.SHIRAKUMO.RASTER:TRANSFORM"> <header> <span class="visibility">EXTERNAL</span> <span class="type">TYPE-DEFINITION</span> <h4 class="name"> <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ATRANSFORM">TRANSFORM</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="file:///home/linus/Projects/c/sbcl/src/code/deftype.lisp#12:0">Source</a>  </header> <div class="docstring"><pre>Type representing a 2D affine transformation matrix.

This is an alias for (SIMPLE-ARRAY SINGLE-FLOAT (6)).

The matrix elements are stored in row-major order. The identity matrix
is therefore #(1 0 0 0 1 0).

See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3AMAKE-TRANSFORM" class="xref">MAKE-TRANSFORM</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:ALPHA-BLEND"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3AALPHA-BLEND">ALPHA-BLEND</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">SRC</li>    <li class="argument">DST</li>    <li class="argument">ALPHA</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/composite.lisp#L5">Source</a>  </header> <div class="docstring"><pre>Performs source-over alpha blending for a single color channel.

SRC should be the source color to be overlaid, DST should be the
target color to be overlaid onto. ALPHA should be the alpha value of
the new color.

Returns the blended result.

All values should be (UNSIGNED-BYTE 8).</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:BILINEAR-GRADIENT"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ABILINEAR-GRADIENT">BILINEAR-GRADIENT</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">STOPS</li>    <li class="argument">AX</li>    <li class="argument">AY</li>    <li class="argument">BX</li>    <li class="argument">BY</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/sampler.lisp#L147">Source</a>  </header> <div class="docstring"><pre>Creates a bilinear gradient sampler.

STOPS should be a list where each entry describes a griadent stop. A
gradient stop should be a list of two elements, the first being the
stop index and the second being the colour at that stop. The indices
should be in the range of [0,1].

AX and AY should be the coordinates of the gradient's start.
BX and BY should be the coordinates of the gradient's stop.

The bilinear gradient is like the linear gradient, but mirrored at A.

See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ASAMPLER" class="xref">SAMPLER (type)</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ALINEAR-GRADIENT" class="xref">LINEAR-GRADIENT</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:BLIT-BUFFER"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ABLIT-BUFFER">BLIT-BUFFER</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">SOURCE</li>    <li class="argument">SW</li>    <li class="argument">SH</li>    <li class="argument">TARGET</li>    <li class="argument">TW</li>    <li class="argument">TH</li>    <li class="argument lambda-list-keyword">&amp;KEY</li>    <li class="argument">TX</li>    <li class="argument">TY</li>    <li class="argument">SX</li>    <li class="argument">SY</li>    <li class="argument">W</li>    <li class="argument">H</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/composite.lisp#L28">Source</a>  </header> <div class="docstring"><pre>Copy one pixel buffer to another.

This simply replaces pixels with no attempt at blending and as such is
much faster of an operation than COMPOSITE-BUFFER.

Both SOURCE and TARGET must be BUFFERs.

SW and SH should be the dimensions of the source image.
TW and TH should be the dimensions of the target image.
SX and SY should be offsets of the region to read from the source.
TX and TY should be offsets of the region to write into the target.
W and H should be the width and height of the region to transfer.

If any part of the source or target region should be out of bounds,
the operation is truncated to only transfer valid pixels.

If the SOURCE and TARGET are EQ the consequences are undefined.

See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ABUFFER" class="xref">BUFFER (type)</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACOMPOSITE-BUFFER" class="xref">COMPOSITE-BUFFER</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:CLEAR"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACLEAR">CLEAR</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">BUFFER</li>    <li class="argument lambda-list-keyword">&amp;OPTIONAL</li>    <li class="argument">COLOR</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/buffer.lisp#L46">Source</a>  </header> <div class="docstring"><pre>Clears the pixel buffer to :white or :black.

This is equivalent to (fill buffer 0) for black or (fill buffer 255)
for white, but may be more efficient.

See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ABUFFER" class="xref">BUFFER</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:CLIP"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACLIP">CLIP</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">SDF</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/raster.lisp#L10">Source</a>  </header> <div class="docstring"><pre>Clip the SDF to be within the clipping region only.

See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3APUSH-CLIP" class="xref">PUSH-CLIP</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3APOP-CLIP" class="xref">POP-CLIP</a>
See <a href="#MACRO-FUNCTION%20ORG.SHIRAKUMO.RASTER%3AWITH-CLIP" class="xref">WITH-CLIP</a>
See <a href="#MACRO-FUNCTION%20ORG.SHIRAKUMO.RASTER%3AWITH-NO-CLIPPING" class="xref">WITH-NO-CLIPPING</a>
See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ASDF" class="xref">SDF (type)</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:COLOR-REF"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACOLOR-REF">COLOR-REF</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">BUFFER</li>    <li class="argument">I</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/buffer.lisp#L76">Source</a>  </header> <div class="docstring"><pre>Accesses a single pixel in a color buffer.

The color buffer must be a BUFFER, and the INDEX must be in the valid
buffer range. Attempting to reference a pixel outside the buffer leads
to undefined behaviour.

See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ACOLOR" class="xref">COLOR (type)</a>
See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ABUFFER" class="xref">BUFFER (type)</a>
See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3AINDEX" class="xref">INDEX (type)</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACOLOR-REF%2A" class="xref">COLOR-REF*</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:(SETF COLOR-REF)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3A%28SETF%20COLOR-REF%29">(SETF COLOR-REF)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">VALUE</li>    <li class="argument">BUFFER</li>    <li class="argument">I</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/buffer.lisp#L81">Source</a>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:COLOR-REF*"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACOLOR-REF%2A">COLOR-REF*</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">BUFFER</li>    <li class="argument">X</li>    <li class="argument">Y</li>    <li class="argument">W</li>    <li class="argument">H</li>    <li class="argument lambda-list-keyword">&amp;KEY</li>    <li class="argument">BORDER</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/buffer.lisp#L86">Source</a>  </header> <div class="docstring"><pre>Accesses a single pixel in a color buffer with border handling.

BORDER defines how to deal with coordinates that lie outside of the
buffer region. It can be one of the following:

  :CLAMP   --- Accesses the nearest pixel on the border of the buffer.
  :REPEAT  --- Wraps the coordinate around.
  COLOR    --- Returns the BORDER color instead.

When setting this place, :BORDER and :CLAMP do not modify anything
when the pixel lies outside the buffer.

The color buffer must be a BUFFER and the X, Y, W, and H descriptors
must be INDEXes. X and Y may lay outside their respective ranges, but
the W and H must be accurate to the buffer's contents. If they are
not, undefined behaviour occurs.

See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ACOLOR" class="xref">COLOR (type)</a>
See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3AINDEX" class="xref">INDEX (type)</a>
See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ABUFFER" class="xref">BUFFER (type)</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACOLOR-REF" class="xref">COLOR-REF</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:(SETF COLOR-REF*)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3A%28SETF%20COLOR-REF%2A%29">(SETF COLOR-REF*)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">COLOR</li>    <li class="argument">BUFFER</li>    <li class="argument">X</li>    <li class="argument">Y</li>    <li class="argument">W</li>    <li class="argument">H</li>    <li class="argument lambda-list-keyword">&amp;KEY</li>    <li class="argument">BORDER</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/buffer.lisp#L103">Source</a>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:COMBINE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACOMBINE">COMBINE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">A</li>    <li class="argument">B</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/sdf.lisp#L148">Source</a>  </header> <div class="docstring"><pre>Combine (union) the two shapes.

See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ASDF" class="xref">SDF (type)</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:COMPOSITE-BUFFER"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACOMPOSITE-BUFFER">COMPOSITE-BUFFER</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">SOURCE</li>    <li class="argument">SW</li>    <li class="argument">SH</li>    <li class="argument">TARGET</li>    <li class="argument">TW</li>    <li class="argument">TH</li>    <li class="argument lambda-list-keyword">&amp;KEY</li>    <li class="argument">TX</li>    <li class="argument">TY</li>    <li class="argument">SX</li>    <li class="argument">SY</li>    <li class="argument">W</li>    <li class="argument">H</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/composite.lisp#L33">Source</a>  </header> <div class="docstring"><pre>Composite two image buffers together.

This performs basic &quot;source-over&quot; alpha blending.

Both SOURCE and TARGET must be BUFFERs.

SW and SH should be the dimensions of the source image.
TW and TH should be the dimensions of the target image.
SX and SY should be offsets of the region to read from the source.
TX and TY should be offsets of the region to write into the target.
W and H should be the width and height of the region to transfer.

If any part of the source or target region should be out of bounds,
the operation is truncated to only transfer valid pixels.

If the SOURCE and TARGET are EQ the consequences are undefined.

See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3AALPHA-BLEND" class="xref">ALPHA-BLEND</a>
See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ABUFFER" class="xref">BUFFER (type)</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACOMPOSITE-MASK" class="xref">COMPOSITE-MASK</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:COMPOSITE-MASK"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACOMPOSITE-MASK">COMPOSITE-MASK</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">SAMPLER</li>    <li class="argument">SOURCE</li>    <li class="argument">SW</li>    <li class="argument">SH</li>    <li class="argument">TARGET</li>    <li class="argument">TW</li>    <li class="argument">TH</li>    <li class="argument lambda-list-keyword">&amp;KEY</li>    <li class="argument">TX</li>    <li class="argument">TY</li>    <li class="argument">SX</li>    <li class="argument">SY</li>    <li class="argument">W</li>    <li class="argument">H</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/composite.lisp#L42">Source</a>  </header> <div class="docstring"><pre>Composite a mask onto a target buffer using a color function.

This performs basic &quot;source-over&quot; alpha blending.

TARGET must be a BUFFER. SOURCE must be a W*H sized
(SIMPLE-ARRAY (UNSIGNED-BYTE 8) (*)) that holds the alpha mask.

SAMPLER should be a SAMPLER.

SW and SH should be the dimensions of the source image.
TW and TH should be the dimensions of the target image.
SX and SY should be offsets of the region to read from the source.
TX and TY should be offsets of the region to write into the target.
W and H should be the width and height of the region to transfer.

If any part of the source or target region should be out of bounds,
the operation is truncated to only transfer valid pixels.

If the SAMPLER accesses the TARGET the consequences are undefined.

See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3AALPHA-BLEND" class="xref">ALPHA-BLEND</a>
See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ABUFFER" class="xref">BUFFER (type)</a>
See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ASAMPLER" class="xref">SAMPLER (type)</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:COMPOSITE-SDF"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACOMPOSITE-SDF">COMPOSITE-SDF</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">SAMPLER</li>    <li class="argument">SDF</li>    <li class="argument">SW</li>    <li class="argument">SH</li>    <li class="argument">TARGET</li>    <li class="argument">TW</li>    <li class="argument">TH</li>    <li class="argument lambda-list-keyword">&amp;KEY</li>    <li class="argument">TX</li>    <li class="argument">TY</li>    <li class="argument">SX</li>    <li class="argument">SY</li>    <li class="argument">W</li>    <li class="argument">H</li>    <li class="argument">FEATHER</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/composite.lisp#L55">Source</a>  </header> <div class="docstring"><pre>Composite a shape described by a signed distance function onto a target buffer using a color function.

This performs basic &quot;source-over&quot; alpha blending.

TARGET must be a BUFFER.

SDF should be an SDF.

SAMPLER should be a SAMPLER.

SW and SH should be the dimensions of the source image.
TW and TH should be the dimensions of the target image.
SX and SY should be offsets of the region to read from the source.
TX and TY should be offsets of the region to write into the target.
W and H should be the width and height of the region to transfer.

If any part of the source or target region should be out of bounds,
the operation is truncated to only transfer valid pixels.

If the SAMPLER accesses the TARGET the consequences are undefined.

See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3AALPHA-BLEND" class="xref">ALPHA-BLEND</a>
See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ABUFFER" class="xref">BUFFER (type)</a>
See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ASDF" class="xref">SDF (type)</a>
See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ASAMPLER" class="xref">SAMPLER (type)</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:CONICAL-GRADIENT"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACONICAL-GRADIENT">CONICAL-GRADIENT</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">STOPS</li>    <li class="argument">X</li>    <li class="argument">Y</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/sampler.lisp#L168">Source</a>  </header> <div class="docstring"><pre>Creates a conical gradient sampler.

STOPS should be a list where each entry describes a griadent stop. A
gradient stop should be a list of two elements, the first being the
stop index and the second being the colour at that stop. The indices
should be in the range of [0,2*PI].

X and Y should be the coordinates of the gradient's center.

See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ASAMPLER" class="xref">SAMPLER (type)</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:COORDINATE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACOORDINATE">COORDINATE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">X</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/buffer.lisp#L19">Source</a>  </header> <div class="docstring"><pre>Coerces the input into a coordinate.

See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ACOORDINATE" class="xref">COORDINATE (type)</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:CURVE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACURVE">CURVE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">AX</li>    <li class="argument">AY</li>    <li class="argument">WX</li>    <li class="argument">WY</li>    <li class="argument">VX</li>    <li class="argument">VY</li>    <li class="argument">BX</li>    <li class="argument">BY</li>    <li class="argument lambda-list-keyword">&amp;KEY</li>    <li class="argument">THICKNESS</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/sdf.lisp#L107">Source</a>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:DECODE-COLOR"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ADECODE-COLOR">DECODE-COLOR</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">C</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/buffer.lisp#L68">Source</a>  </header> <div class="docstring"><pre>Decodes an (UNSIGNED-BYTE 32) into its B G R A color components.

See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3AENCODE-COLOR" class="xref">ENCODE-COLOR</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:DIAMOND-GRADIENT"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ADIAMOND-GRADIENT">DIAMOND-GRADIENT</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">STOPS</li>    <li class="argument">X</li>    <li class="argument">Y</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/sampler.lisp#L160">Source</a>  </header> <div class="docstring"><pre>Creates a diamond gradient sampler.

STOPS should be a list where each entry describes a griadent stop. A
gradient stop should be a list of two elements, the first being the
stop index and the second being the colour at that stop. The indices
are relative to the actual coordinate system in which the sampler is
evaluated. 

X and Y should be the coordinates of the gradient's center.

See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ASAMPLER" class="xref">SAMPLER (type)</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:DRAW-CURVE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ADRAW-CURVE">DRAW-CURVE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">AX</li>    <li class="argument">AY</li>    <li class="argument">WX</li>    <li class="argument">WY</li>    <li class="argument">VX</li>    <li class="argument">VY</li>    <li class="argument">BX</li>    <li class="argument">BY</li>    <li class="argument">BUFFER</li>    <li class="argument">BW</li>    <li class="argument">BH</li>    <li class="argument lambda-list-keyword">&amp;KEY</li>    <li class="argument">SAMPLER</li>    <li class="argument">LINE-WIDTH</li>    <li class="argument">FEATHER</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/raster.lisp#L45">Source</a>  </header> <div class="docstring"><pre>Draw a cubic bezier curve onto the given buffer.

A and B are the end points and W and V the corresponding handle
points.

BUFFER must be a pixel buffer and BW and BH its dimensions.

SAMPLER is coerced via ENSURE-SAMPLER. It is used to derive the actual
color information to fill the shape.

LINE-WIDTH should be the width of the stroke.

FEATHER should be a feathering (blurring) radius applied to the shape.
Note that the blur only extends inwards, meaning the shape only ever
gets perceptually &quot;smaller&quot;. You may have to increase its size to
compensate.

The shape is clipped by the current clipping region prior to
rasterisation.

See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ABUFFER" class="xref">BUFFER (type)</a>
See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3AINDEX" class="xref">INDEX (type)</a>
See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ASAMPLER" class="xref">SAMPLER (type)</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3AENSURE-SAMPLER" class="xref">ENSURE-SAMPLER</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACLIP" class="xref">CLIP</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACURVE" class="xref">CURVE</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:DRAW-CURVES"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ADRAW-CURVES">DRAW-CURVES</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">POINTS</li>    <li class="argument">BUFFER</li>    <li class="argument">BW</li>    <li class="argument">BH</li>    <li class="argument lambda-list-keyword">&amp;KEY</li>    <li class="argument">SAMPLER</li>    <li class="argument">LINE-WIDTH</li>    <li class="argument">FEATHER</li>    <li class="argument">LINE-STYLE</li>    <li class="argument">JOIN-STYLE</li>    <li class="argument">CAP-STYLE</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/raster.lisp#L58">Source</a>  </header> <div class="docstring"><pre>TODO: Implement</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:DRAW-ELLIPSE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ADRAW-ELLIPSE">DRAW-ELLIPSE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">X</li>    <li class="argument">Y</li>    <li class="argument">W</li>    <li class="argument">H</li>    <li class="argument">BUFFER</li>    <li class="argument">BW</li>    <li class="argument">BH</li>    <li class="argument lambda-list-keyword">&amp;KEY</li>    <li class="argument">SAMPLER</li>    <li class="argument">LINE-WIDTH</li>    <li class="argument">FEATHER</li>    <li class="argument">START</li>    <li class="argument">END</li>    <li class="argument">INNER-RADIUS</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/raster.lisp#L72">Source</a>  </header> <div class="docstring"><pre>Draw an ellipse onto the given buffer.

BUFFER must be a pixel buffer and BW and BH its dimensions.

SAMPLER is coerced via ENSURE-SAMPLER. It is used to derive the actual
color information to fill the shape.

LINE-WIDTH should be the width of the stroke. If none is passed, the
rectangle is filled instead.

FEATHER should be a feathering (blurring) radius applied to the shape.
Note that the blur only extends inwards, meaning the shape only ever
gets perceptually &quot;smaller&quot;. You may have to increase its size to
compensate.

START and END, if given, describe the starting and ending angles of
the pie that is drawn.

INNER-RADIUS, if given, describes the radius of the inner cutout of
the arc that is drawn. If the arc is not symmetrical, this radius is
relative to the width and the inner radius in height is derived
automatically.

The shape is clipped by the current clipping region prior to
rasterisation.

See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ABUFFER" class="xref">BUFFER (type)</a>
See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3AINDEX" class="xref">INDEX (type)</a>
See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ASAMPLER" class="xref">SAMPLER (type)</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3AENSURE-SAMPLER" class="xref">ENSURE-SAMPLER</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACLIP" class="xref">CLIP</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3AELLIPSE" class="xref">ELLIPSE</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:DRAW-IMAGE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ADRAW-IMAGE">DRAW-IMAGE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">IMAGE</li>    <li class="argument">X</li>    <li class="argument">Y</li>    <li class="argument">BUFFER</li>    <li class="argument">BW</li>    <li class="argument">BH</li>    <li class="argument lambda-list-keyword">&amp;KEY</li>    <li class="argument">TRANSFORM</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/raster.lisp#L100">Source</a>  </header> <div class="docstring"><pre>Draw another image onto the given buffer.

BUFFER must be a pixel buffer and BW and BH its dimensions.

IMAGE must be an IMAGE.

X and Y must be INDEX coordinates of where to draw the image in the
buffer.

TRANSFORM may be a transform matrix by which to transform the image.

The shape is clipped by the current clipping region prior to
rasterisation.

See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ABUFFER" class="xref">BUFFER (type)</a>
See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3AINDEX" class="xref">INDEX (type)</a>
See <a href="#STRUCTURE%20ORG.SHIRAKUMO.RASTER%3AIMAGE" class="xref">IMAGE (type)</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACLIP" class="xref">CLIP</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:DRAW-LINE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ADRAW-LINE">DRAW-LINE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">AX</li>    <li class="argument">AY</li>    <li class="argument">BX</li>    <li class="argument">BY</li>    <li class="argument">BUFFER</li>    <li class="argument">BW</li>    <li class="argument">BH</li>    <li class="argument lambda-list-keyword">&amp;KEY</li>    <li class="argument">SAMPLER</li>    <li class="argument">LINE-WIDTH</li>    <li class="argument">FEATHER</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/raster.lisp#L36">Source</a>  </header> <div class="docstring"><pre>Draw a line onto the given buffer.

BUFFER must be a pixel buffer and BW and BH its dimensions.

SAMPLER is coerced via ENSURE-SAMPLER. It is used to derive the actual
color information to fill the shape.

LINE-WIDTH should be the width of the stroke.

FEATHER should be a feathering (blurring) radius applied to the shape.
Note that the blur only extends inwards, meaning the shape only ever
gets perceptually &quot;smaller&quot;. You may have to increase its size to
compensate.

The shape is clipped by the current clipping region prior to
rasterisation.

See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ABUFFER" class="xref">BUFFER (type)</a>
See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3AINDEX" class="xref">INDEX (type)</a>
See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ASAMPLER" class="xref">SAMPLER (type)</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3AENSURE-SAMPLER" class="xref">ENSURE-SAMPLER</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACLIP" class="xref">CLIP</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ALINE" class="xref">LINE</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:DRAW-LINES"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ADRAW-LINES">DRAW-LINES</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">POINTS</li>    <li class="argument">BUFFER</li>    <li class="argument">BW</li>    <li class="argument">BH</li>    <li class="argument lambda-list-keyword">&amp;KEY</li>    <li class="argument">SAMPLER</li>    <li class="argument">LINE-WIDTH</li>    <li class="argument">FEATHER</li>    <li class="argument">LINE-STYLE</li>    <li class="argument">JOIN-STYLE</li>    <li class="argument">CAP-STYLE</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/raster.lisp#L54">Source</a>  </header> <div class="docstring"><pre>TODO: Implement</pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:DRAW-POLYGON"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ADRAW-POLYGON">DRAW-POLYGON</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">POINTS</li>    <li class="argument">BUFFER</li>    <li class="argument">BW</li>    <li class="argument">BH</li>    <li class="argument lambda-list-keyword">&amp;KEY</li>    <li class="argument">SAMPLER</li>    <li class="argument">LINE-WIDTH</li>    <li class="argument">FEATHER</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/raster.lisp#L82">Source</a>  </header> <div class="docstring"><pre>Draw a closed polygon onto the given buffer.

BUFFER must be a pixel buffer and BW and BH its dimensions.

SAMPLER is coerced via ENSURE-SAMPLER. It is used to derive the actual
color information to fill the shape.

LINE-WIDTH should be the width of the stroke. If none is passed, the
rectangle is filled instead.

FEATHER should be a feathering (blurring) radius applied to the shape.
Note that the blur only extends inwards, meaning the shape only ever
gets perceptually &quot;smaller&quot;. You may have to increase its size to
compensate.

The POINTS should be a SEQUENCE in which the points are packed.
Meaning the sequence contains [X1 Y1 X2 Y2 ...].

The shape is clipped by the current clipping region prior to
rasterisation.

See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ABUFFER" class="xref">BUFFER (type)</a>
See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3AINDEX" class="xref">INDEX (type)</a>
See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ASAMPLER" class="xref">SAMPLER (type)</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3AENSURE-SAMPLER" class="xref">ENSURE-SAMPLER</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACLIP" class="xref">CLIP</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3APOLYGON" class="xref">POLYGON</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:DRAW-RECTANGLE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ADRAW-RECTANGLE">DRAW-RECTANGLE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">X</li>    <li class="argument">Y</li>    <li class="argument">W</li>    <li class="argument">H</li>    <li class="argument">BUFFER</li>    <li class="argument">BW</li>    <li class="argument">BH</li>    <li class="argument lambda-list-keyword">&amp;KEY</li>    <li class="argument">SAMPLER</li>    <li class="argument">LINE-WIDTH</li>    <li class="argument">CORNER-RADII</li>    <li class="argument">FEATHER</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/raster.lisp#L62">Source</a>  </header> <div class="docstring"><pre>Draw a rectangle onto the given buffer.

BUFFER must be a pixel buffer and BW and BH its dimensions.

SAMPLER is coerced via ENSURE-SAMPLER. It is used to derive the actual
color information to fill the shape.

LINE-WIDTH should be the width of the stroke. If none is passed, the
rectangle is filled instead.

FEATHER should be a feathering (blurring) radius applied to the shape.
Note that the blur only extends inwards, meaning the shape only ever
gets perceptually &quot;smaller&quot;. You may have to increase its size to
compensate.

CORNER-RADII if given should be a sequence of four elements, which
describe the radii of the corners of the rectangle, with the first
being top left, second top right, third bottom right, and fourth
bottom left.

The shape is clipped by the current clipping region prior to
rasterisation.

See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ABUFFER" class="xref">BUFFER (type)</a>
See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3AINDEX" class="xref">INDEX (type)</a>
See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ASAMPLER" class="xref">SAMPLER (type)</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3AENSURE-SAMPLER" class="xref">ENSURE-SAMPLER</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACLIP" class="xref">CLIP</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ARECTANGLE" class="xref">RECTANGLE</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:ELLIPSE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3AELLIPSE">ELLIPSE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">X</li>    <li class="argument">Y</li>    <li class="argument">W</li>    <li class="argument">H</li>    <li class="argument lambda-list-keyword">&amp;KEY</li>    <li class="argument">START</li>    <li class="argument">END</li>    <li class="argument">INNER-RADIUS</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/sdf.lisp#L57">Source</a>  </header> <div class="docstring"><pre>Construct an ellipse SDF.

X and Y should be the centre coordinates of the ellipse.
W and H should be the half-size dimensions of the ellipse.

START and END, if given, describe the starting and ending angles of
the pie that is drawn.

INNER-RADIUS, if given, describes the radius of the inner cutout of
the arc that is drawn. If the arc is not symmetrical, this radius is
relative to the width and the inner radius in height is derived
automatically.

See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ASDF" class="xref">SDF (type)</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:ENCODE-COLOR"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3AENCODE-COLOR">ENCODE-COLOR</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">B</li>    <li class="argument">G</li>    <li class="argument">R</li>    <li class="argument lambda-list-keyword">&amp;OPTIONAL</li>    <li class="argument">A</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/buffer.lisp#L60">Source</a>  </header> <div class="docstring"><pre>Encodes a B G R A quadruplet into an (UNSIGNED-BYTE 32) color.

See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ADECODE-COLOR" class="xref">DECODE-COLOR</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:ENSURE-SAMPLER"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3AENSURE-SAMPLER">ENSURE-SAMPLER</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">SAMPLER</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/sampler.lisp#L177">Source</a>  </header> <div class="docstring"><pre>Tries to ensure the object is a sampler.

If the object is a FUNCTION, it is returned. If the function is not an
actual SAMPLER, the behaviour is undefined.

If the object is a COLOR, a SOLID-COLOR sampler is returned.

If the object is an IMAGE, a SAMPLER with REPEAT bordering is
returned.

If the object is NIL, a SOLID-COLOR sampler of 0 (transparent black)
is returned.

See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ASOLID-COLOR" class="xref">SOLID-COLOR</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ASAMPLER" class="xref">SAMPLER</a>
See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ACOLOR" class="xref">COLOR (type)</a>
See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ASAMPLER" class="xref">SAMPLER (type)</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:EVALUATE-GRADIENT"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3AEVALUATE-GRADIENT">EVALUATE-GRADIENT</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">STOPS</li>    <li class="argument">I</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/sampler.lisp#L116">Source</a>  </header> <div class="docstring"><pre>Evaluates a linear gradient.

STOPS should be a list where each entry describes a griadent stop. A
gradient stop should be a list of two elements, the first being the
stop index and the second being the colour at that stop.

I should be the point at which to evaluate the gradient. If I is
smaller than the first stop, the first stop's color is returned. If I
is larger than the last stop, the last stop's color is returned. If I
lies between two stops, the returned color is a linear interpolation
of the two stops, respective to I's position between them.

See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ACOLOR" class="xref">COLOR (type)</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ALERP-COLOR" class="xref">LERP-COLOR</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:IMAGE-BUFFER"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3AIMAGE-BUFFER">IMAGE-BUFFER</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">INSTANCE</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/buffer.lisp#L23">Source</a>  </header> <div class="docstring"><pre>Accesses the underlying pixel buffer of the image.

The buffer must be 4*WIDTH*HEIGHT in size.

See <a href="#STRUCTURE%20ORG.SHIRAKUMO.RASTER%3AIMAGE" class="xref">IMAGE (type)</a>
See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ABUFFER" class="xref">BUFFER (type)</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:(SETF IMAGE-BUFFER)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3A%28SETF%20IMAGE-BUFFER%29">(SETF IMAGE-BUFFER)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">VALUE</li>    <li class="argument">INSTANCE</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/buffer.lisp#L23">Source</a>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:IMAGE-HEIGHT"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3AIMAGE-HEIGHT">IMAGE-HEIGHT</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">INSTANCE</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/buffer.lisp#L23">Source</a>  </header> <div class="docstring"><pre>Accesses the height of the pixel buffer.

See <a href="#STRUCTURE%20ORG.SHIRAKUMO.RASTER%3AIMAGE" class="xref">IMAGE (type)</a>
See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3AINDEX" class="xref">INDEX</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:(SETF IMAGE-HEIGHT)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3A%28SETF%20IMAGE-HEIGHT%29">(SETF IMAGE-HEIGHT)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">VALUE</li>    <li class="argument">INSTANCE</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/buffer.lisp#L23">Source</a>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:IMAGE-WIDTH"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3AIMAGE-WIDTH">IMAGE-WIDTH</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">INSTANCE</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/buffer.lisp#L23">Source</a>  </header> <div class="docstring"><pre>Accesses the width of the pixel buffer.

See <a href="#STRUCTURE%20ORG.SHIRAKUMO.RASTER%3AIMAGE" class="xref">IMAGE (type)</a>
See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3AINDEX" class="xref">INDEX</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:(SETF IMAGE-WIDTH)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3A%28SETF%20IMAGE-WIDTH%29">(SETF IMAGE-WIDTH)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">VALUE</li>    <li class="argument">INSTANCE</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/buffer.lisp#L23">Source</a>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:INTERSECT"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3AINTERSECT">INTERSECT</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">A</li>    <li class="argument">B</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/sdf.lisp#L154">Source</a>  </header> <div class="docstring"><pre>Intersect the two shapes.

See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ASDF" class="xref">SDF (type)</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:LERP-COLOR"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ALERP-COLOR">LERP-COLOR</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">A</li>    <li class="argument">B</li>    <li class="argument">X</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/buffer.lisp#L117">Source</a>  </header> <div class="docstring"><pre>Linearly interpolates between two colors.

A and B must be COLORs, and X must be a SINGLE-FLOAT in range [0,1]
that encompasses the interpolation distance between the two for the
resulting color. Each CHANNEL of the colors is interpolated
separately.

If X is out of range or A or B aren't COLORs the results are
undefined.

See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ACOLOR" class="xref">COLOR (type)</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:LINE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ALINE">LINE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">AX</li>    <li class="argument">AY</li>    <li class="argument">BX</li>    <li class="argument">BY</li>    <li class="argument lambda-list-keyword">&amp;KEY</li>    <li class="argument">THICKNESS</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/sdf.lisp#L95">Source</a>  </header> <div class="docstring"><pre>Construct a line SDF.

AX and AY describe the start point coordinates.
BX and BY describe the end point coordinates.

THICKNESS describes the width of the line.

See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ASDF" class="xref">SDF (type)</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:LINEAR-GRADIENT"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ALINEAR-GRADIENT">LINEAR-GRADIENT</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">STOPS</li>    <li class="argument">AX</li>    <li class="argument">AY</li>    <li class="argument">BX</li>    <li class="argument">BY</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/sampler.lisp#L134">Source</a>  </header> <div class="docstring"><pre>Creates a linear gradient sampler.

STOPS should be a list where each entry describes a griadent stop. A
gradient stop should be a list of two elements, the first being the
stop index and the second being the colour at that stop. The indices
should be in the range of [0,1].

AX and AY should be the coordinates of the gradient's start.
BX and BY should be the coordinates of the gradient's stop.

See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ASAMPLER" class="xref">SAMPLER (type)</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ABILINEAR-GRADIENT" class="xref">BILINEAR-GRADIENT</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:MAKE-BUFFER"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3AMAKE-BUFFER">MAKE-BUFFER</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">W</li>    <li class="argument">H</li>    <li class="argument lambda-list-keyword">&amp;OPTIONAL</li>    <li class="argument">CONTENTS</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/buffer.lisp#L41">Source</a>  </header> <div class="docstring"><pre>Creates a fresh pixel buffer.

If CONTENTS is given, it must be a sequence that equals 4*W*H in
length.

See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ABUFFER" class="xref">BUFFER (type)</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:MAKE-IMAGE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3AMAKE-IMAGE">MAKE-IMAGE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">W</li>    <li class="argument">H</li>    <li class="argument lambda-list-keyword">&amp;OPTIONAL</li>    <li class="argument">BUFFER</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/buffer.lisp#L32">Source</a>  </header> <div class="docstring"><pre>Creates a new image.

If BUFFER is given and it is already a BUFFER, then the value is
shared with the resulting IMAGE instance. Otherwise, a new BUFFER is
allocated and the contents are copied over.

See <a href="#STRUCTURE%20ORG.SHIRAKUMO.RASTER%3AIMAGE" class="xref">IMAGE (type)</a>
See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ABUFFER" class="xref">BUFFER</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:MAKE-TRANSFORM"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3AMAKE-TRANSFORM">MAKE-TRANSFORM</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument lambda-list-keyword">&amp;REST</li>    <li class="argument">ARGS</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/sampler.lisp#L9">Source</a>  </header> <div class="docstring"><pre>Create a transform matrix.

If no arguments are passed, an identity matrix is returned. Otherwise
you must pass 6 arguments, which form the 6 elements of the matrix in
row-major order.

See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ATRANSFORM" class="xref">TRANSFORM (type)</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:OUTLINE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3AOUTLINE">OUTLINE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">SDF</li>    <li class="argument">THICKNESS</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/sdf.lisp#L161">Source</a>  </header> <div class="docstring"><pre>Create an outline of the given thickness out of the shape.

See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ASDF" class="xref">SDF (type)</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:POLYGON"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3APOLYGON">POLYGON</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">POINTS</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/sdf.lisp#L116">Source</a>  </header> <div class="docstring"><pre>Construct a closed polygon SDF.

The POINTS should be a SEQUENCE in which the points are packed.
Meaning the sequence contains [X1 Y1 X2 Y2 ...].

See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ASDF" class="xref">SDF (type)</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:POP-CLIP"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3APOP-CLIP">POP-CLIP</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/raster.lisp#L18">Source</a>  </header> <div class="docstring"><pre>Pop a clipping SDF from the stack.

If no corresponding push operation happened first, an error is
signalled.

See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3APUSH-CLIP" class="xref">PUSH-CLIP</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACLIP" class="xref">CLIP</a>
See <a href="#MACRO-FUNCTION%20ORG.SHIRAKUMO.RASTER%3AWITH-CLIP" class="xref">WITH-CLIP</a>
See <a href="#MACRO-FUNCTION%20ORG.SHIRAKUMO.RASTER%3AWITH-NO-CLIPPING" class="xref">WITH-NO-CLIPPING</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:PUSH-CLIP"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3APUSH-CLIP">PUSH-CLIP</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">SDF</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/raster.lisp#L13">Source</a>  </header> <div class="docstring"><pre>Push a clipping SDF onto the stack.

This will only ever //narrow// the clipping region to become the
intersection of the current clipping region and the newly passed one.

See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3APOP-CLIP" class="xref">POP-CLIP</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACLIP" class="xref">CLIP</a>
See <a href="#MACRO-FUNCTION%20ORG.SHIRAKUMO.RASTER%3AWITH-CLIP" class="xref">WITH-CLIP</a>
See <a href="#MACRO-FUNCTION%20ORG.SHIRAKUMO.RASTER%3AWITH-NO-CLIPPING" class="xref">WITH-NO-CLIPPING</a>
See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ASDF" class="xref">SDF (type)</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:RADIAL-GRADIENT"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ARADIAL-GRADIENT">RADIAL-GRADIENT</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">STOPS</li>    <li class="argument">X</li>    <li class="argument">Y</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/sampler.lisp#L126">Source</a>  </header> <div class="docstring"><pre>Creates a radial gradient sampler.

STOPS should be a list where each entry describes a griadent stop. A
gradient stop should be a list of two elements, the first being the
stop index and the second being the colour at that stop. The indices
are relative to the actual coordinate system in which the sampler is
evaluated. 

X and Y should be the coordinates of the gradient's center.

See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ASAMPLER" class="xref">SAMPLER (type)</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:RECTANGLE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ARECTANGLE">RECTANGLE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">X</li>    <li class="argument">Y</li>    <li class="argument">W</li>    <li class="argument">H</li>    <li class="argument lambda-list-keyword">&amp;KEY</li>    <li class="argument">CORNER-RADII</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/sdf.lisp#L26">Source</a>  </header> <div class="docstring"><pre>Construct a rectangular SDF.

X and Y should be the centre coordinates of the rectangle.
W and H should be the half-size dimensions of the rectangle.

CORNER-RADII if given should be a sequence of four elements, which
describe the radii of the corners of the rectangle, with the first
being top left, second top right, third bottom right, and fourth
bottom left.

See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ASDF" class="xref">SDF (type)</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:ROTATE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3AROTATE">ROTATE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">SDF</li>    <li class="argument">ANGLE</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/sdf.lisp#L182">Source</a>  </header> <div class="docstring"><pre>Rotate the shape by the given angle.

See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ASDF" class="xref">SDF (type)</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:SAMPLE-COLOR"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ASAMPLE-COLOR">SAMPLE-COLOR</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">BUFFER</li>    <li class="argument">X</li>    <li class="argument">Y</li>    <li class="argument">W</li>    <li class="argument">H</li>    <li class="argument lambda-list-keyword">&amp;KEY</li>    <li class="argument">BORDER</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/sampler.lisp#L74">Source</a>  </header> <div class="docstring"><pre>Samples a color from a buffer.

Unlike COLOR-REF and COLOR-REF* this allows COORDINATEs for X and Y,
performing bilinear interpolation as necessary if the requested index
should lie between pixels.

The BORDER argument is the same as for COLOR-REF*

See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ABUFFER" class="xref">BUFFER (type)</a>
See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ACOORDINATE" class="xref">COORDINATE (type)</a>
See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ACOLOR" class="xref">COLOR (type)</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACOLOR-REF" class="xref">COLOR-REF</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACOLOR-REF%2A" class="xref">COLOR-REF*</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:SAMPLER"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ASAMPLER">SAMPLER</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">BUFFER</li>    <li class="argument">W</li>    <li class="argument">H</li>    <li class="argument lambda-list-keyword">&amp;KEY</li>    <li class="argument">BORDER</li>    <li class="argument">TRANSFORM</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/sampler.lisp#L80">Source</a>  </header> <div class="docstring"><pre>Creates a texture sampler function.

The color buffer must be a BUFFER.

The BORDER argument is the same as for COLOR-REF*

The TRANSFORM may be a TRANSFORM matrix by which the coordinates
passed to the resulting SAMPLER are transformed before sampling the
color buffer, thereby allowing you to rotate, scale, and otherwise
transform the buffer.

See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ASAMPLER" class="xref">SAMPLER (type)</a>
See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ATRANSFORM" class="xref">TRANSFORM (type)</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACOLOR-REF%2A" class="xref">COLOR-REF*</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACOMPOSITE-MASK" class="xref">COMPOSITE-MASK</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACOMPOSITE-SDF" class="xref">COMPOSITE-SDF</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:SCALE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ASCALE">SCALE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">SDF</li>    <li class="argument">X</li>    <li class="argument">Y</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/sdf.lisp#L175">Source</a>  </header> <div class="docstring"><pre>Scale the shape by the given coordinates.

See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ASDF" class="xref">SDF (type)</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:SKEW"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ASKEW">SKEW</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">SDF</li>    <li class="argument">X</li>    <li class="argument">Y</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/sdf.lisp#L191">Source</a>  </header> <div class="docstring"><pre>Skew the shape by the given degrees.

See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ASDF" class="xref">SDF (type)</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:SOLID-COLOR"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ASOLID-COLOR">SOLID-COLOR</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">R</li>    <li class="argument">G</li>    <li class="argument">B</li>    <li class="argument lambda-list-keyword">&amp;OPTIONAL</li>    <li class="argument">A</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/sampler.lisp#L109">Source</a>  </header> <div class="docstring"><pre>Creates a sampler with a uniform color.

See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ASAMPLER" class="xref">SAMPLER (type)</a>
See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ACOLOR" class="xref">COLOR (type)</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACOMPOSITE-MASK" class="xref">COMPOSITE-MASK</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACOMPOSITE-SDF" class="xref">COMPOSITE-SDF</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:SUBTRACT"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ASUBTRACT">SUBTRACT</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">A</li>    <li class="argument">B</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/sdf.lisp#L142">Source</a>  </header> <div class="docstring"><pre>Subtract the second shape from the first.

See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ASDF" class="xref">SDF (type)</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:TRANSFORM"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ATRANSFORM">TRANSFORM</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">SDF</li>    <li class="argument">MAT</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/sdf.lisp#L198">Source</a>  </header> <div class="docstring"><pre>Transform the shape by the given affine transform matrix.

See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ATRANSFORM" class="xref">TRANSFORM (type)</a>
See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ASDF" class="xref">SDF (type)</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.RASTER:TRANSLATE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ATRANSLATE">TRANSLATE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">SDF</li>    <li class="argument">X</li>    <li class="argument">Y</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/sdf.lisp#L168">Source</a>  </header> <div class="docstring"><pre>Trasnlate (move) the shape by the given coordinates.

See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ASDF" class="xref">SDF (type)</a></pre></div> </article> </li>  <li> <article class="definition macro callable" id="MACRO-FUNCTION ORG.SHIRAKUMO.RASTER:WITH-CLIP"> <header> <span class="visibility">EXTERNAL</span> <span class="type">MACRO</span> <h4 class="name"> <a href="#MACRO-FUNCTION%20ORG.SHIRAKUMO.RASTER%3AWITH-CLIP">WITH-CLIP</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">SDF</li>    <li class="argument lambda-list-keyword">&amp;BODY</li>    <li class="argument">BODY</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/raster.lisp#L24">Source</a>  </header> <div class="docstring"><pre>Narrow the clipping region during BODY by SDF.

See <a href="#MACRO-FUNCTION%20ORG.SHIRAKUMO.RASTER%3AWITH-NO-CLIPPING" class="xref">WITH-NO-CLIPPING</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3APUSH-CLIP" class="xref">PUSH-CLIP</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3APOP-CLIP" class="xref">POP-CLIP</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ACLIP" class="xref">CLIP</a>
See <a href="#TYPE%20ORG.SHIRAKUMO.RASTER%3ASDF" class="xref">SDF (type)</a>
See <a href="#MACRO-FUNCTION%20ORG.SHIRAKUMO.RASTER%3AWITH-RECT-CLIP" class="xref">WITH-RECT-CLIP</a></pre></div> </article> </li>  <li> <article class="definition macro callable" id="MACRO-FUNCTION ORG.SHIRAKUMO.RASTER:WITH-DRAWING"> <header> <span class="visibility">EXTERNAL</span> <span class="type">MACRO</span> <h4 class="name"> <a href="#MACRO-FUNCTION%20ORG.SHIRAKUMO.RASTER%3AWITH-DRAWING">WITH-DRAWING</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">IMAGE</li>    <li class="argument lambda-list-keyword">&amp;BODY</li>    <li class="argument">BODY</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/raster.lisp#L106">Source</a>  </header> <div class="docstring"><pre>Convenience macro for drawing to an image.

IMAGE may either be a variable bound to an IMAGE instance, or a list
of arguments to pass to MAKE-IMAGE. For instance, in order to draw to
a buffer, you may use (WIDTH HEIGHT BUFFER) for the IMAGE. Either way,
the IMAGE instance is returned at the end.

Within BODY the DRAW-* functions act the same as documented, except
that the BUFFER, BW, and BH arguments cannot be passed and are instead
filled in for you by the values of the IMAGE.

This makes it a lot more convenient to perform a sequence of draw
operations on a buffer.

See <a href="#STRUCTURE%20ORG.SHIRAKUMO.RASTER%3AIMAGE" class="xref">IMAGE (type)</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ADRAW-LINE" class="xref">DRAW-LINE</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ADRAW-CURVE" class="xref">DRAW-CURVE</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ADRAW-LINES" class="xref">DRAW-LINES</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ADRAW-CURVES" class="xref">DRAW-CURVES</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ADRAW-RECTANGLE" class="xref">DRAW-RECTANGLE</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ADRAW-ELLIPSE" class="xref">DRAW-ELLIPSE</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ADRAW-POLYGON" class="xref">DRAW-POLYGON</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ADRAW-IMAGE" class="xref">DRAW-IMAGE</a></pre></div> </article> </li>  <li> <article class="definition macro callable" id="MACRO-FUNCTION ORG.SHIRAKUMO.RASTER:WITH-NO-CLIPPING"> <header> <span class="visibility">EXTERNAL</span> <span class="type">MACRO</span> <h4 class="name"> <a href="#MACRO-FUNCTION%20ORG.SHIRAKUMO.RASTER%3AWITH-NO-CLIPPING">WITH-NO-CLIPPING</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument lambda-list-keyword">&amp;BODY</li>    <li class="argument">BODY</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/raster.lisp#L32">Source</a>  </header> <div class="docstring"><pre>Disables previously applied clipping during BODY.

See <a href="#MACRO-FUNCTION%20ORG.SHIRAKUMO.RASTER%3AWITH-CLIP" class="xref">WITH-CLIP</a></pre></div> </article> </li>  <li> <article class="definition macro callable" id="MACRO-FUNCTION ORG.SHIRAKUMO.RASTER:WITH-RECT-CLIP"> <header> <span class="visibility">EXTERNAL</span> <span class="type">MACRO</span> <h4 class="name"> <a href="#MACRO-FUNCTION%20ORG.SHIRAKUMO.RASTER%3AWITH-RECT-CLIP">WITH-RECT-CLIP</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <ul class="arguments"> <li class="argument">X</li>  <li class="argument">Y</li>  <li class="argument">W</li>  <li class="argument">H</li> </ul>    <li class="argument lambda-list-keyword">&amp;BODY</li>    <li class="argument">BODY</li>  </ul>  <a class="source-link" href="https://github.com/shirakumo/raster/blob/13846095fc1af67b808f66e2516b09336de66e1a/raster.lisp#L28">Source</a>  </header> <div class="docstring"><pre>Shorthand to narrow by a rectangular clipping region.

See <a href="#MACRO-FUNCTION%20ORG.SHIRAKUMO.RASTER%3AWITH-CLIP" class="xref">WITH-CLIP</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.RASTER%3ARECTANGLE" class="xref">RECTANGLE</a></pre></div> </article> </li>  <li> <article class="definition source-transform" id="SOURCE-TRANSFORM ORG.SHIRAKUMO.RASTER:IMAGE-BUFFER"> <header> <span class="visibility">EXTERNAL</span> <span class="type">SOURCE-TRANSFORM</span> <h4 class="name"> <a href="#SOURCE-TRANSFORM%20ORG.SHIRAKUMO.RASTER%3AIMAGE-BUFFER">IMAGE-BUFFER</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition source-transform" id="SOURCE-TRANSFORM ORG.SHIRAKUMO.RASTER:(SETF IMAGE-BUFFER)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">SOURCE-TRANSFORM</span> <h4 class="name"> <a href="#SOURCE-TRANSFORM%20ORG.SHIRAKUMO.RASTER%3A%28SETF%20IMAGE-BUFFER%29">(SETF IMAGE-BUFFER)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition source-transform" id="SOURCE-TRANSFORM ORG.SHIRAKUMO.RASTER:IMAGE-HEIGHT"> <header> <span class="visibility">EXTERNAL</span> <span class="type">SOURCE-TRANSFORM</span> <h4 class="name"> <a href="#SOURCE-TRANSFORM%20ORG.SHIRAKUMO.RASTER%3AIMAGE-HEIGHT">IMAGE-HEIGHT</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition source-transform" id="SOURCE-TRANSFORM ORG.SHIRAKUMO.RASTER:(SETF IMAGE-HEIGHT)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">SOURCE-TRANSFORM</span> <h4 class="name"> <a href="#SOURCE-TRANSFORM%20ORG.SHIRAKUMO.RASTER%3A%28SETF%20IMAGE-HEIGHT%29">(SETF IMAGE-HEIGHT)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition source-transform" id="SOURCE-TRANSFORM ORG.SHIRAKUMO.RASTER:IMAGE-WIDTH"> <header> <span class="visibility">EXTERNAL</span> <span class="type">SOURCE-TRANSFORM</span> <h4 class="name"> <a href="#SOURCE-TRANSFORM%20ORG.SHIRAKUMO.RASTER%3AIMAGE-WIDTH">IMAGE-WIDTH</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition source-transform" id="SOURCE-TRANSFORM ORG.SHIRAKUMO.RASTER:(SETF IMAGE-WIDTH)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">SOURCE-TRANSFORM</span> <h4 class="name"> <a href="#SOURCE-TRANSFORM%20ORG.SHIRAKUMO.RASTER%3A%28SETF%20IMAGE-WIDTH%29">(SETF IMAGE-WIDTH)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li> </ul> </article> </li> </ul> </section>  </article> <script>window.addEventListener("DOMContentLoaded", function(){
    var unmarkElement = function(el){
        if(el.tagName === "mark" || el.tagName === "MARK"){
            [].forEach.call(el.childNodes, function(child){
                el.parentNode.insertBefore(child, el);
            });
            el.parentNode.removeChild(el);
        }else if(el.parentNode.tagName === "mark"){
            return unmarkElement(el.parentNode);
        }
        return null;
    }

    var unmarkAll = function(root){
        root = root || document;
        [].forEach.call(root.querySelectorAll("mark"), unmarkElement);
    }
    
    var markElement = function(el){
        if(el.parentNode.tagName === "mark" || el.parentNode.tagName === "MARK"){
            return el.parentNode;
        } else {
            unmarkAll();
            var marked = document.createElement("mark");
            el.parentNode.insertBefore(marked, el);
            marked.appendChild(el);
            return marked;
        }
    }

    var markFragmented = function(){
        if(window.location.hash){
            var el = document.getElementById(decodeURIComponent(window.location.hash.substr(1)));
            if(el) markElement(el);
        }
    }

    var registerXrefLink = function(link){
        var el = document.getElementById(decodeURIComponent(link.getAttribute("href").substr(1)));
        if(el){
            link.addEventListener("click", function(){
                markElement(el);
            });
        }
    }

    var registerXrefLinks = function(root){
        root = root || document;
        [].forEach.call(root.querySelectorAll("a.xref"), registerXrefLink);
    }

    markFragmented();
    registerXrefLinks();
}); </script> </body> </html> 